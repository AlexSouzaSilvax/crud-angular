{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Projetos\\\\vscode\\\\crud-angular\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nimport { of } from 'rxjs';\nimport { catchError } from 'rxjs/operators';\nimport { ErrorDialogComponent } from 'src/app/shared/components/error-dialog/error-dialog.component';\nimport { ConfirmDialogComponent } from 'src/app/shared/components/confirm-dialog/confirm-dialog.component';\nlet CoursesComponent = class CoursesComponent {\n  constructor(coursesService, dialog, router, route, service, snackbar, location) {\n    this.coursesService = coursesService;\n    this.dialog = dialog;\n    this.router = router;\n    this.route = route;\n    this.service = service;\n    this.snackbar = snackbar;\n    this.location = location;\n    this.displayedColumns = ['name', 'category', 'actions'];\n    this.courses$ = this.coursesService.list().pipe(catchError(error => {\n      this.onError('Erro ao carregar cursos');\n      return of([]);\n    }));\n  }\n\n  onError(errorMsg) {\n    this.dialog.open(ErrorDialogComponent, {\n      data: errorMsg\n    });\n  } //criar um shared\n\n\n  onCancel() {\n    this.location.back();\n  }\n\n  onSuccess(result, actionMessage) {\n    if (result._id != null) {\n      this.snackbar.open(`${result._id} ${actionMessage} success`, '', {\n        duration: 5000\n      });\n      this.onCancel();\n    }\n  }\n\n  ngOnInit() {}\n\n  onAdd() {\n    this.router.navigate(['new'], {\n      relativeTo: this.route\n    });\n  }\n\n  onEdit(pCourse) {\n    this.router.navigate(['new', {\n      course: JSON.stringify(pCourse)\n    }], {\n      relativeTo: this.route\n    });\n  }\n\n  onClickDelete(_id) {\n    var _this = this;\n\n    this.openDialog('Deseja realmente apagar ?', 'Esta ação não poderá ser revertida', /*#__PURE__*/_asyncToGenerator(function* () {\n      return _this.onDelete(_id);\n    }));\n  }\n\n  onDelete(_id) {\n    this.service.delete(_id).subscribe(result => this.onSuccess(result, 'delete success'), error => this.onError('delete error'));\n  }\n\n  openDialog(pTitle, pDescription, pOnConfirm) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      data: {\n        title: pTitle,\n        description: pDescription,\n        onConfirm: pOnConfirm\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {//console.log('The dialog was closed');\n    });\n  }\n\n};\nCoursesComponent = __decorate([Component({\n  selector: 'app-courses',\n  templateUrl: './courses.component.html',\n  styleUrls: ['./courses.component.scss']\n})], CoursesComponent);\nexport { CoursesComponent };","map":{"version":3,"sources":["C:/Projetos/vscode/crud-angular/src/app/courses/courses/courses.component.ts"],"names":["__decorate","Component","of","catchError","ErrorDialogComponent","ConfirmDialogComponent","CoursesComponent","constructor","coursesService","dialog","router","route","service","snackbar","location","displayedColumns","courses$","list","pipe","error","onError","errorMsg","open","data","onCancel","back","onSuccess","result","actionMessage","_id","duration","ngOnInit","onAdd","navigate","relativeTo","onEdit","pCourse","course","JSON","stringify","onClickDelete","openDialog","onDelete","delete","subscribe","pTitle","pDescription","pOnConfirm","dialogRef","title","description","onConfirm","afterClosed","selector","templateUrl","styleUrls"],"mappings":"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","sourcesContent":["import { __decorate } from \"tslib\";\r\nimport { Component } from '@angular/core';\r\nimport { of } from 'rxjs';\r\nimport { catchError } from 'rxjs/operators';\r\nimport { ErrorDialogComponent } from 'src/app/shared/components/error-dialog/error-dialog.component';\r\nimport { ConfirmDialogComponent } from 'src/app/shared/components/confirm-dialog/confirm-dialog.component';\r\nlet CoursesComponent = class CoursesComponent {\r\n    constructor(coursesService, dialog, router, route, service, snackbar, location) {\r\n        this.coursesService = coursesService;\r\n        this.dialog = dialog;\r\n        this.router = router;\r\n        this.route = route;\r\n        this.service = service;\r\n        this.snackbar = snackbar;\r\n        this.location = location;\r\n        this.displayedColumns = ['name', 'category', 'actions'];\r\n        this.courses$ = this.coursesService.list().pipe(catchError((error) => {\r\n            this.onError('Erro ao carregar cursos');\r\n            return of([]);\r\n        }));\r\n    }\r\n    onError(errorMsg) {\r\n        this.dialog.open(ErrorDialogComponent, {\r\n            data: errorMsg,\r\n        });\r\n    }\r\n    //criar um shared\r\n    onCancel() {\r\n        this.location.back();\r\n    }\r\n    onSuccess(result, actionMessage) {\r\n        if (result._id != null) {\r\n            this.snackbar.open(`${result._id} ${actionMessage} success`, '', {\r\n                duration: 5000,\r\n            });\r\n            this.onCancel();\r\n        }\r\n    }\r\n    ngOnInit() { }\r\n    onAdd() {\r\n        this.router.navigate(['new'], { relativeTo: this.route });\r\n    }\r\n    onEdit(pCourse) {\r\n        this.router.navigate(['new', { course: JSON.stringify(pCourse) }], {\r\n            relativeTo: this.route,\r\n        });\r\n    }\r\n    onClickDelete(_id) {\r\n        this.openDialog('Deseja realmente apagar ?', 'Esta ação não poderá ser revertida', async () => this.onDelete(_id));\r\n    }\r\n    onDelete(_id) {\r\n        this.service.delete(_id).subscribe((result) => this.onSuccess(result, 'delete success'), (error) => this.onError('delete error'));\r\n    }\r\n    openDialog(pTitle, pDescription, pOnConfirm) {\r\n        const dialogRef = this.dialog.open(ConfirmDialogComponent, {\r\n            data: {\r\n                title: pTitle,\r\n                description: pDescription,\r\n                onConfirm: pOnConfirm,\r\n            },\r\n        });\r\n        dialogRef.afterClosed().subscribe((result) => {\r\n            //console.log('The dialog was closed');\r\n        });\r\n    }\r\n};\r\nCoursesComponent = __decorate([\r\n    Component({\r\n        selector: 'app-courses',\r\n        templateUrl: './courses.component.html',\r\n        styleUrls: ['./courses.component.scss'],\r\n    })\r\n], CoursesComponent);\r\nexport { CoursesComponent };\r\n"]},"metadata":{},"sourceType":"module"}